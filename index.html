<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>愛着タイプ診断｜親のためのセルフチェック</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      --bg-main: #f4fbf9;
      --card-bg: #ffffff;
      --accent: #79c8b8;
      --accent-soft: #d8f3ec;
      --accent-deep: #42a394;
      --text-main: #243b3b;
      --text-sub: #647474;
      --border-soft: #e3f0ec;
    }

    * {
      box-sizing: border-box;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Hiragino Sans", "Yu Gothic", sans-serif;
      line-height: 1.7;
      margin: 0;
      padding: 0;
      background: radial-gradient(circle at top left, #e7faf4 0, #f4fbf9 55%, #fdfefe 100%);
      color: var(--text-main);
    }

    header {
      background: linear-gradient(135deg, #f0fcf8 0, #f4fbf9 40%, #ffffff 100%);
      padding: 20px 16px 18px;
      position: sticky;
      top: 0;
      z-index: 10;
      border-bottom: 1px solid #e7f3ef;
      backdrop-filter: blur(10px);
    }

    header-inner {
      max-width: 880px;
      margin: 0 auto;
      display: block;
    }

    header h1 {
      margin: 0 0 4px;
      font-size: 20px;
      letter-spacing: 0.04em;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      padding: 2px 9px;
      border-radius: 999px;
      font-size: 11px;
      background: var(--accent-soft);
      color: var(--accent-deep);
    }

    header p {
      margin: 0;
      font-size: 13px;
      color: var(--text-sub);
    }

    main {
      max-width: 880px;
      margin: 20px auto 40px;
      padding: 0 16px 24px;
    }

    .card {
      background: var(--card-bg);
      padding: 20px 20px 18px;
      border-radius: 20px;
      box-shadow: 0 12px 32px rgba(0,0,0,0.04);
      border: 1px solid var(--border-soft);
      margin-bottom: 16px;
    }

    .intro {
      font-size: 14px;
      color: var(--text-sub);
    }

    .scale {
      font-size: 13px;
      color: var(--text-sub);
      margin-top: 10px;
      padding: 8px 10px;
      background: #f6fcfa;
      border-radius: 12px;
      border: 1px dashed #d0e9df;
    }

    .questions-title {
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 10px;
      color: var(--accent-deep);
    }

    .question {
      margin-bottom: 10px;
      padding: 10px 10px 8px;
      border-radius: 14px;
      background: #f9fdfb;
      border: 1px solid #ecf4f1;
    }

    .question:nth-child(2n) {
      background: #f7fbf9;
    }

    .q-text {
      font-weight: 500;
      margin-bottom: 6px;
      font-size: 14px;
    }

    .options {
      display: flex;
      flex-wrap: wrap;
      gap: 8px 12px;
      font-size: 13px;
    }

    .options label {
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 3px 8px;
      border-radius: 999px;
      transition: background 0.15s ease, transform 0.08s ease;
      background: #ffffff;
      border: 1px solid #e1f0ec;
    }

    .options input[type="radio"] {
      accent-color: var(--accent);
    }

    .options label:hover {
      background: #f0faf6;
      transform: translateY(-1px);
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 10px 24px;
      border-radius: 999px;
      border: none;
      font-size: 15px;
      cursor: pointer;
      margin-top: 14px;
      transition: transform 0.08s ease, box-shadow 0.12s ease, background 0.15s ease, color 0.15s ease;
      font-weight: 600;
      letter-spacing: 0.03em;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--accent) 0, var(--accent-deep) 100%);
      color: #ffffff;
      box-shadow: 0 8px 18px rgba(66,163,148,0.35);
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 10px 22px rgba(66,163,148,0.45);
    }

    .btn-primary:active {
      transform: translateY(1px);
      box-shadow: 0 4px 10px rgba(66,163,148,0.3);
    }

    .btn-primary:disabled {
      opacity: .5;
      cursor: not-allowed;
      box-shadow: none;
    }

    .btn-secondary {
      background: #e8f3ef;
      color: #45615f;
      margin-left: 8px;
      box-shadow: none;
    }

    .btn-secondary:hover {
      background: #ddeee7;
    }

    .result {
      margin-top: 4px;
      font-size: 14px;
    }

    .result-type {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 4px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .tag {
      display: inline-flex;
      align-items: center;
      font-size: 11px;
      padding: 2px 10px;
      border-radius: 999px;
      background: var(--accent-soft);
      color: var(--accent-deep);
    }

    .scores {
      font-size: 12px;
      color: var(--text-sub);
      margin-bottom: 10px;
      padding: 6px 10px;
      background: #f6fbf9;
      border-radius: 999px;
      display: inline-block;
    }

    .notice {
      font-size: 11px;
      color: #9aa8a5;
      margin-top: 8px;
    }

    .sub-heading {
      font-size: 13px;
      font-weight: 600;
      margin: 0 0 6px;
      color: var(--accent-deep);
    }

    .cta-area {
      margin-top: 14px;
      padding-top: 12px;
      border-top: 1px dashed #d1e7df;
      font-size: 13px;
      color: var(--text-sub);
    }

    .cta-buttons {
      margin-top: 8px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .btn-outline {
      background: #ffffff;
      color: var(--accent-deep);
      border-radius: 999px;
      border: 1px solid var(--accent-soft);
      padding: 7px 16px;
      font-size: 13px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: background 0.15s ease, transform 0.08s ease;
    }

    .btn-outline:hover {
      background: #ecfaf6;
      transform: translateY(-1px);
    }

    @media (max-width: 600px) {
      header h1 {
        font-size: 18px;
      }
      .card {
        padding: 16px 14px;
      }
      .question {
        padding: 8px 8px 6px;
      }
      .btn {
        width: 100%;
        justify-content: center;
        margin-right: 0;
      }
      .btn-secondary {
        margin-left: 0;
      }
      .cta-buttons {
        flex-direction: column;
      }
      .scores {
        display: block;
      }
    }
  </style>
</head>
<body>
  <header>
    <header-inner>
      <h1>愛着タイプ診断<span class="pill">親のためのセルフチェック</span></h1>
      <p>24問に答えると、あなたの愛着タイプと、これから整えていく方向性がやさしく見えてきます。</p>
    </header-inner>
  </header>

  <main>
    <section class="card">
      <p class="intro">
        この診断は、「私はダメな親かどうか」を決めるためのものではありません。<br>
        子どもと向き合うときの心のクセ（愛着の傾向）をそっと言葉にして、「ここからどう整えていこうか？」を一緒に考えるための入り口です。
      </p>
      <p class="scale">
        各質問について、<br>
        <strong>1＝全くあてはまらない / 2＝あまりあてはまらない / 3＝どちらともいえない / 4＝ややあてはまる / 5＝とてもあてはまる</strong><br>
        の中から、直感に近いものをお選びください。
      </p>
    </section>

    <form id="attachment-form" class="card">
      <p class="questions-title">Q. あなたの今の状態に一番近いものをお選びください。</p>
      <div id="questions"></div>

      <button type="button" class="btn btn-primary" id="submitBtn">診断する</button>
      <button type="button" class="btn btn-secondary" id="resetBtn">リセット</button>
      <p class="notice">
        ※この診断は医療・診断行為ではなく、心理学をもとにしたセルフチェックです。結果にショックを受けた場合は、一人で抱え込まず、信頼できる専門家や支援者にご相談ください。
      </p>
    </form>

    <section id="result-card" class="card" style="display:none;">
      <div class="result">
        <div class="result-type" id="result-type"></div>
        <div class="scores" id="result-scores"></div>
        <div id="result-text"></div>

        <div class="cta-area">
          <p class="sub-heading">今のあなたへ、次の一歩のご提案</p>
          <p>
            愛着のタイプは「良い・悪い」を決めるラベルではなく、これまでの歩みと今の心の状態を言葉にしたものです。<br>
            ここから少しずつ整えていくことで、親子の安心感と、子どもの自己肯定感は何歳からでも育て直していくことができます。
          </p>
          <div class="cta-buttons">
            <!-- ここに講座やポケットイクモへのリンクを後から入れられます -->
            <button type="button" class="btn-outline">
              愛着を整える講座の案内を見る
            </button>
            <button type="button" class="btn-outline">
              日々の関わりをサポートする動画サービスを見る
            </button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script>
    // 質問データ
    const questions = [
      // 不安型 1–6
      { id: 1,  text: "子どもに拒否されると、「嫌われた？」と不安になる。", type: "anxious" },
      { id: 2,  text: "子どもが泣くと、自分が責められているように感じる。", type: "anxious" },
      { id: 3,  text: "子育てでミスすると、必要以上に自分を責めてしまう。", type: "anxious" },
      { id: 4,  text: "パートナーや家族の反応に振り回されやすい。", type: "anxious" },
      { id: 5,  text: "子どもの行動を先回りし、必要以上に手を出してしまう。", type: "anxious" },
      { id: 6,  text: "子どもの小さな変化にも過敏に緊張する。", type: "anxious" },

      // 回避型 7–12
      { id: 7,  text: "子どもが激しく泣くと、距離を置きたくなる。", type: "avoidant" },
      { id: 8,  text: "弱みを人に見せるのが苦手だ。", type: "avoidant" },
      { id: 9,  text: "子どもの感情表現にどう対応すればいいか迷うことが多い。", type: "avoidant" },
      { id: 10, text: "親密な関係になると、心が固くなることがある。", type: "avoidant" },
      { id: 11, text: "自分の感情を表現することが難しい。", type: "avoidant" },
      { id: 12, text: "子どもと密に関わると負担に感じる時がある。", type: "avoidant" },

      // 混合型 13–19
      { id: 13, text: "子どもに近づきたい気持ちと、離れたい気持ちが同時に生じる。", type: "disorganized" },
      { id: 14, text: "子育て中、自分でも説明できない混乱した感情が起こる。", type: "disorganized" },
      { id: 15, text: "子どもが泣くと、抱きしめたい気持ちと逃げたい気持ちが同時に出る。", type: "disorganized" },
      { id: 16, text: "感情の波が突然激しくなる。", type: "disorganized" },
      { id: 17, text: "過去のつらい体験が、今の子育てに影響していると感じる。", type: "disorganized" },
      { id: 18, text: "子どもとのやり取りで身体が固まるように感じる時がある。", type: "disorganized" },
      { id: 19, text: "子どもへの反応が「矛盾している」と感じることがある。", type: "disorganized" },

      // 安定型 20–24
      { id: 20, text: "子どもの気持ちを理解しようとする余裕がある。", type: "secure" },
      { id: 21, text: "子どもが泣いても比較的落ち着いて対応できる。", type: "secure" },
      { id: 22, text: "子どもを信じて見守ることができる。", type: "secure" },
      { id: 23, text: "子どもと過ごす時間に安心感がある。", type: "secure" },
      { id: 24, text: "子どもに対して「大丈夫」という感覚を自然に持てる。", type: "secure" }
    ];

    // 結果テキスト
    const resultContents = {
      secure: {
        title: "安定型（Secure）",
        label: "安心の土台が育っているタイプ",
        text: `
<p>あなたは「安心の土台」が自然に育っているタイプです。子どもの感情の波にも過度に振り回されず、親子のペースを大切にしながら関われる強さがあります。</p>
<p><strong>◆ 強み</strong><br>
・子どもに「安全基地・探索基地」を提供できる<br>
・感情の安定が家庭の雰囲気を整える<br>
・自立と甘えのバランをとりやすい</p>
<p><strong>◆ これからの伸びしろ</strong><br>
・脳発達に合わせた関わり方の質を上げること<br>
・長期的に「親の余白」を守る習慣をつくること</p>
<p>すでにある安定性を土台にしながら、日々の小さな関わりを少しずつ整えていくことで、子どもの自己肯定感や自立心はさらに育っていきます。</p>
        `
      },
      anxious: {
        title: "不安型（Anxious）",
        label: "愛情深いが不安が強くなりやすいタイプ",
        text: `
<p>あなたは「深い愛情」を持ちながら、子どもの反応に敏感になりやすいタイプです。</p>
<p><strong>◆ 起こりやすい状態</strong><br>
・子どもの様子が気になりすぎて疲れやすい<br>
・拒否されたように感じて、落ち込みやすい<br>
・過干渉や心配のしすぎになりがち</p>
<p><strong>◆ リペアの方向性</strong><br>
・不安の「根っこ」をやさしく理解すること<br>
・感情が揺れたときに戻る“マイルール”を作ること<br>
・子どもの自立を信じて、少しずつ見守る練習をすること</p>
<p>もともと愛情がとても豊かなタイプなので、ポイントを押さえていくと変化はとても速く起こります。自分を責めるためではなく、「愛情を子どもに届きやすい形に整えるための一歩」として、この結果を活かしてみてください。</p>
        `
      },
      avoidant: {
        title: "回避型（Avoidant）",
        label: "自立心が強く感情の扱いがむずかしいタイプ",
        text: `
<p>あなたは「自立心」が強く、感情的な場面では距離を取りやすいタイプです。</p>
<p><strong>◆ 起こりやすい状態</strong><br>
・自分の気持ちを言葉にするのがむずかしい<br>
・子どもの大きな感情に戸惑いやすい<br>
・親密さが重く感じることがある</p>
<p><strong>◆ リペアの方向性</strong><br>
・まずは自分の感情に気づく練習をすること<br>
・子どものSOSサインを少しずつ読み取ること<br>
・「感情を出しても大丈夫」という安全な雰囲気を家庭に増やしていくこと</p>
<p>あなたの「落ち着き」や「冷静さ」は、本来とても大きな強みです。そこに少しだけ“感情のあたたかさ”を足していくことで、親子関係はぐっと楽になります。</p>
        `
      },
      disorganized: {
        title: "混合型（Disorganized）",
        label: "近づきたいのに怖さや混乱が起こりやすいタイプ",
        text: `
<p>あなたは「近づきたいのに怖い」「寄り添いたいのに混乱する」といった、矛盾する感情が同時に起こりやすいタイプです。</p>
<p><strong>◆ 起こりやすい状態</strong><br>
・抱きしめたい気持ちと逃げたい気持ちが同時に出る<br>
・感情の波が突然激しくなることがある<br>
・過去のつらさが、今の子育てに影響していると感じる</p>
<p><strong>◆ リペアの方向性</strong><br>
・まずは「自分の心を安全に保つこと」を最優先にすること<br>
・感情の波を小さくする具体的な技法を身につけること<br>
・少しずつ「安心できる人間関係」を増やし、愛着の土台を再構築していくこと</p>
<p>丁寧なステップを踏んでいけば、必ず安定に近づいていくタイプです。この結果は、あなたが悪いという意味ではなく、「ケアすべき傷がちゃんと見えてきた」というサインだと受け取ってみてください。</p>
        `
      },
      mixed: {
        title: "明確なタイプは混在",
        label: "複数の傾向がバランスよく存在する状態",
        text: `
<p>現時点では、特定のタイプに偏るというよりも、複数の傾向が同時に存在している結果になりました。</p>
<p>子育ての状況、パートナーとの関係、仕事や体調など、いくつかの要因が重なって、一時的に揺らぎが大きくなっている可能性もあります。</p>
<p>この場合は、タイプ名にこだわるよりも、<br>
・スコアが高かった領域の説明を読み<br>
・「今の自分に一番あてはまる部分」から整えていくこと<br>
を意識してみてください。</p>
<p>愛着は一度決まったら終わり、ではなく、大人になってからも少しずつリペアされていく“プロセス”です。焦らず、今できる一歩から始めていきましょう。</p>
        `
      }
    };

    // 質問描画
    function renderQuestions() {
      const container = document.getElementById("questions");
      container.innerHTML = "";
      questions.forEach(q => {
        const div = document.createElement("div");
        div.className = "question";
        div.innerHTML = `
          <div class="q-text">Q${q.id}. ${q.text}</div>
          <div class="options">
            ${[1,2,3,4,5].map(v => `
              <label>
                <input type="radio" name="q${q.id}" value="${v}"> ${v}
              </label>
            `).join("")}
          </div>
        `;
        container.appendChild(div);
      });
    }

    function getScores() {
      let scores = { anxious: 0, avoidant: 0, disorganized: 0, secure: 0 };
      let answeredCount = 0;

      questions.forEach(q => {
        const val = document.querySelector(`input[name="q${q.id}"]:checked`);
        if (val) {
          const num = parseInt(val.value, 10);
          scores[q.type] += num;
          answeredCount++;
        }
      });

      return { scores, answeredCount };
    }

    function diagnose() {
      const { scores, answeredCount } = getScores();

      if (answeredCount < questions.length) {
        alert("全ての質問に回答してください。");
        return;
      }

      const anxious = scores.anxious;
      const avoidant = scores.avoidant;
      const disorg = scores.disorganized;
      const secure = scores.secure;

      let mainType = null;

      // 1. 混合型優先
      const diffAnxAvoid = Math.abs(anxious - avoidant);
      if (disorg >= 17 && diffAnxAvoid <= 3) {
        mainType = "disorganized";
      } else if (anxious >= 14 && (anxious - avoidant) >= 4) {
        mainType = "anxious";
      } else if (avoidant >= 14 && (avoidant - anxious) >= 4) {
        mainType = "avoidant";
      } else if (secure >= 18 && anxious <= 13 && avoidant <= 13 && disorg <= 13) {
        mainType = "secure";
      } else {
        mainType = "mixed";
      }

      const resultCard = document.getElementById("result-card");
      const typeEl = document.getElementById("result-type");
      const scoresEl = document.getElementById("result-scores");
      const textEl = document.getElementById("result-text");

      const content = resultContents[mainType];

      typeEl.innerHTML = `${content.title}<span class="tag">${content.label}</span>`;
      scoresEl.innerHTML = `＜スコア＞ 不安型：${anxious} / 回避型：${avoidant} / 混合型：${disorg} / 安定型：${secure}`;
      textEl.innerHTML = content.text;

      resultCard.style.display = "block";
      window.scrollTo({ top: resultCard.offsetTop - 80, behavior: "smooth" });
    }

    function resetForm() {
      document.getElementById("attachment-form").reset();
      document.getElementById("result-card").style.display = "none";
    }

    document.addEventListener("DOMContentLoaded", () => {
      renderQuestions();
      document.getElementById("submitBtn").addEventListener("click", diagnose);
      document.getElementById("resetBtn").addEventListener("click", resetForm);
    });
  </script>
</body>
</html>
